Feature: 訂單與支付功能

  身為一名學生
  我想要購買課程並完成支付
  這樣就能觀看課程影片

  Background:
    Given 後端 API 正常運行
    And 資料庫中有課程資料
    And 使用者已登入

  # 1. 核心場景：建立訂單
  Scenario: 建立訂單
    Given 我在課程列表頁面
    When 我點擊課程的「立即購買」按鈕
    Then 我應該被導向到訂單建立頁面
    And 我應該看到訂單編號
    And 我應該看到付款截止時間（3天後）
    And 付款方式應該都是反灰不可點選

  # 2. 核心場景：完成支付
  Scenario: 完成支付
    Given 我已經建立了訂單
    When 我點擊「進行支付」按鈕
    Then 我應該看到付款成功訊息（3秒）
    And 3秒後我應該被導向到課程的第一個章節頁面

  # 3. 核心場景：查看訂單紀錄
  Scenario: 查看訂單紀錄
    Given 我已經建立了訂單
    When 我訪問課程詳情頁面
    Then 我應該在頁面下方看到訂單紀錄區塊
    And 我應該看到訂單編號
    And 我應該看到訂單狀態
    And 我應該看到付款截止日期

  # 4. 核心場景：逾期訂單
  Scenario: 逾期未付款訂單
    Given 我有一個超過3天未付款的訂單
    When 我查看訂單紀錄
    Then 訂單狀態應該顯示為「已取消」
    And 備註應該顯示「期限內未完成付款」
    And 訂單不應該有「立即完成訂單」按鈕

